From 43636d3985da00eb244245d451be7dee1af74509 Mon Sep 17 00:00:00 2001
From: Kevin W Monroe <kevin.monroe@canonical.com>
Date: Wed, 10 May 2017 16:32:24 +0000
Subject: [PATCH] BIGTOP-2764: tweak spark-datanucleus workaround

---
 bigtop-deploy/puppet/modules/spark/manifests/init.pp | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

diff --git a/bigtop-deploy/puppet/modules/spark/manifests/init.pp b/bigtop-deploy/puppet/modules/spark/manifests/init.pp
index 1b2ff6b..4c72d20 100644
--- a/bigtop-deploy/puppet/modules/spark/manifests/init.pp
+++ b/bigtop-deploy/puppet/modules/spark/manifests/init.pp
@@ -148,14 +148,13 @@
       $history_log_dir = "hdfs:///var/log/spark/apps",
   ) {
 
-    package { 'spark-core':
-      ensure => latest,
-    }
 ### This is an ungodly hack to deal with the consequence of adding
 ### unconditional hive-support into Spark
 ### The addition is tracked by BIGTOP-2154
 ### The real fix will come in BIGTOP-2268
-    package { 'spark-datanucleus':
+    include spark::datanucleus
+
+    package { 'spark-core':
       ensure => latest,
     }
 
